%% hgbtheme-bachelor.sty
%% This file is part of the Hagenberg Thesis package for creating bachelors's and masters's theses
%% Author: Wilhelm Burger (wilbur@ieee.org)
%% GitHub: https://github.com/Digital-Media/HagenbergThesis
%% File encoding: UTF-8

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{hgbtheme-thesis}[2023/10/26]%%AUTO
\RequirePackage{functional}

%% This is a 'theme' file which specifies the layout and structure of the
%% document's front pages.


%% -----------------------

\providecommand{\hgb@AdvisorRoleDefaultDE}{Betreuung}
\providecommand{\hgb@AdvisorRoleDefaultEN}{Supervisor}

\renewcommand{\hgb@InitTheme}{%  called by hgbthesis.cls at \maketitle, all final fields should be initialized here
  % set the final thesis name:
  \ifthenelse{\equal{\hgb@TitleLanguage}{german}}%
    {%
      \def\tmp@ThesisName{\hgb@ThesisNameDE}% fully expand by \edef to make \MakeUppercase and \@addspaces work!
      \def\tmp@ProposalName{\hgb@ProposalNameDE}%
      \ifthenelse{\equal{\hgb@AdvisorRole}{}}%
        {\renewcommand{\hgb@AdvisorRole}{\hgb@AdvisorRoleDefaultDE}}{}%
    }
    {%
      \def\tmp@ThesisName{\hgb@ThesisNameEN}%
      \def\tmp@ProposalName{\hgb@ProposalNameEN}%
      \ifthenelse{\equal{\hgb@AdvisorRole}{}}%
        {\renewcommand{\hgb@AdvisorRole}{\hgb@AdvisorRoleDefaultEN}}{}
    }%
}
  
\renewcommand{\hgb@MakeFrontPages}{  %% stub defined in hgbthesis.cls, must be redefined here!
  \hgb@MakeTitlePage%
	\ifthenelse{\boolean{hgb@IsProposal}}%
		{%	thesis proposal:
			%\hgb@MakeAdvisorPage%     no copyright/declaration page for proposals
		}%			
		{%	final thesis:
			%\hgb@MakeAdvisorPage%    advisor info is now on title page
			\hgb@MakeCopyrightPage%
			\hgb@MakeDeclarationPage%
		}%
}

%% Title page ---------------------------------------------------

\newcommand{\hgb@MakeTitlePage}{%
\begin{titlepage}%
		\rule{0mm}{10mm}%
		\vspace*{0mm}%
		\begin{center}%
			\hgb@TitlePageFont%
			\setlength{\unitlength}{1cm}%
			% author --------------------------------------------------
			{\Large\hgb@Author}%
			\vskip 8mm%
			% title --------------------------------------------------
			\parbox[c][5cm][c]{\textwidth}{%
				\centering%
				{\LARGE\bfseries\setlength{\baselineskip}{25pt}\hgb@Title}%
				\vskip 8mm%
				{\Large\bfseries\setlength{\baselineskip}{20pt}\hgb@SubTitle}%
			}
			\vskip 10mm%
			% logo --------------------------------------------------
			\hgb@MakeLogo%
			\vskip 15mm%
			% thesis type ---------------------------------------------
      {\Large\@addspaces{\MakeUppercase{\tmp@ThesisName}}%
        \ifthenelse{\boolean{hgb@IsProposal}}{\space\space(\@addspaces{\MakeUppercase{\tmp@ProposalName}})}{}}
			\vskip 4mm%
			% ---------------------------------
			%{\large\ifthenelse{\equal{\hgb@TitleLanguage}{german}}
          %{eingereicht am}%
          %{submitted to the}}
      %\vskip 1mm 
			% program type ---------------------------------
      %{\large \hgb@ProgramType}%
			%\vskip 4mm%
			% program name ---------------------------------
			{\large\hgb@ProgramName}%
			\vskip 4mm%
      % place of study  ---------------------------------
			{\large\hgb@Institution}%
			\vskip 4mm%
      {\large\hgb@PlaceOfStudy}%
			\vskip 8mm%
      % advisors (new) ---------------------------------
      {\large\tabcolsep0.25em
        %Roles: \seqVarCount{\gHgbAdvisorRoles}, Names: \seqVarCount{\gHgbAdvisorNames}\\ % debug
        \begin{tabular}{rl}
          \intStepOneInline{1}{\seqVarCount{\gHgbAdvisorRoles}} {
            \gdef\Idx{##1}%
            \getAdvisorRole{\Idx}: & \getAdvisorName{\Idx} \\[4pt]
            } % works
        \end{tabular}
      }
			% advisors (intermediate) ---------------------------------
      %{\large\tabcolsep0.25em
        %\begin{tabular}{rl}
          %\hgb@AdvisorRole: & \hgb@Advisor
        %\end{tabular}
      %}
			%{\large Betreuung:}\\[2mm]{\Large\hgb@Advisor}%
			\vskip 16mm%
      % submission date ---------------------------------
      {\large\hgb@SubmissionYear}%
		\end{center}%
		\vfil%
\end{titlepage}%
}

%% Generation of logo ----------------------------------------

\newlength{\hgb@LogoHeight}
\setlength{\hgb@LogoHeight}{30mm}

\newcommand{\hgb@MakeLogo}[0]{%
\ifthenelse{\equal{\hgb@LogoFile}{}}%	check if \hgb@LogoFile is empty (unspecified)
	{\vspace*{\hgb@LogoHeight}}%			skip logo
	{\includegraphics[height=\hgb@LogoHeight]{\hgb@LogoFile}}%	insert logo
}

% Default Advisor Page ----------------------------------------

%\newcommand{\hgb@AdvisorHeaderFinal}{
	%\ifthenelse{\equal{\hgb@TitleLanguage}{german}}%
			%{Betreuung}%
			%{Advisor}%
%}
%
%\newcommand{\hgb@AdvisorHeaderProposal}{
	%\ifthenelse{\equal{\hgb@TitleLanguage}{german}}%
			%{Betreuung (Vorschlag)}%
			%{Proposed Advisor}%
%}
%
%\newcommand{\hgb@MakeAdvisorPage}{%
	%\ifthenelse{\equal{\hgb@Advisor}{}}%	does nothing if advisor is undefined 
		%{}{%
		%\newpage
		%%\setcounter{page}{2}
		%\thispagestyle{plain}
		%\rule{0mm}{1mm}
		%\vspace{90mm}
		%\begin{center}
			%\ifthenelse{\boolean{hgb@IsProposal}}%
				%{\hgb@AdvisorHeaderProposal:}%
				%{\hgb@AdvisorHeaderFinal:}%
			%\\
			%\vspace{5mm} 
      %{\Large\sffamily\hgb@Advisor}
		%\end{center}
		%}
%}

%% Default Copyright/License page ----------------------------------------


\newcommand{\hgb@StrictLicenseDE}{Alle Rechte vorbehalten}
\newcommand{\hgb@StrictLicenseEN}{All Rights Reserved}

\newcommand{\hgb@StrictLicense}{%
\ifthenelse{\equal{\hgb@TitleLanguage}{german}}%
	{\begin{german}\hgb@StrictLicenseDE\end{german}}
	{\begin{english}\hgb@StrictLicenseEN\end{english}}
}

%% ------

\newcommand{\hgb@ccLicenseDE}{%
Diese Arbeit wird unter den Bedingungen der \textsf{Creative Commons Lizenz} 
\emph{Attribution-NonCommercial-NoDerivatives 4.0 International} (CC BY-NC-ND 4.0) 
veröffentlicht -- siehe \url{https://creativecommons.org/licenses/by-nc-nd/4.0/}.
}

\newcommand{\hgb@ccLicenseEN}{%
This work is published under the conditions of the \textsf{Creative Commons License} 
\emph{Attribution-NonCommercial-NoDerivatives 4.0 International} (CC BY-NC-ND 4.0)%
---see \url{https://creativecommons.org/licenses/by-nc-nd/4.0/}.
}

\newcommand{\hgb@ccLicense}{%
\ifthenelse{\equal{\hgb@TitleLanguage}{german}}%
	{\begin{german}\hgb@ccLicenseDE\end{german}}
	{\begin{english}\hgb@ccLicenseEN\end{english}}
}

%% ------

\newcommand{\hgb@TheLicense}{%
\ifthenelse{\equal{\hgb@license}{strict}}%
  {\hgb@StrictLicense}%
  {\hgb@ccLicense}%
}

\newcommand{\hgb@MakeCopyrightPage}{%
  \newpage
  \thispagestyle{plain}
  \rule{0mm}{1mm}
  \vspace*{75mm}
  \begin{center}
  \textsf{\copyright\ Copyright\ \hgb@SubmissionYear\ \hgb@Author}
  \end{center}
  \vspace{8mm}
  \hgbJustifyOrCenter{\hgb@TheLicense} % defined in hgb.sty
}

%% Default Declaration Page ----------------------------------------

\newcommand{\hgb@DeclarationTitleDE}{Erklärung}
\newcommand{\hgb@DeclarationTextDE}{%
  Ich erkläre eidesstattlich, dass ich die vorliegende Arbeit selbstständig und ohne fremde Hilfe verfasst, 
  andere als die angegebenen Quellen nicht benutzt und die den benutzten Quellen entnommenen Stellen als 
  solche gekennzeichnet habe. Die Arbeit wurde bisher in gleicher oder ähnlicher Form keiner anderen 
  Prüfungsbehörde vorgelegt.
  Die vorliegende, gedruckte Arbeit ist mit dem elektronisch übermittelten Textdokument identisch.
}

\newcommand{\hgb@DeclarationTitleEN}{Declaration}
\newcommand{\hgb@DeclarationTextEN}{%
  I hereby declare and confirm that this thesis is entirely the result of my own original work. 
  Where other sources of information have been used, they have been indicated as such and properly 
  acknowledged. I further declare that this or similar work has not been submitted for credit elsewhere.
  This printed copy is identical to the submitted electronic version.
}

%% TODO: again this does not work because of expansion issuses in \chapter
%\newcommand{\hgb@DeclarationTitle}{
  %\ifthenelse{\equal{\hgb@MainLanguage}{german}}  %\hgb@TitleLanguage
    %{\hgb@DeclarationTitleDE}%
    %{\hgb@DeclarationTitleEN}
%}
%
%\newcommand{\hgb@DeclarationText}{
  %\ifthenelse{\equal{\hgb@MainLanguage}{german}}
    %{\hgb@DeclarationTextDE}
    %{\hgb@DeclarationTextEN}
%}

\newcommand{\hgb@MakeDeclarationPage}{
		%\chapter{\hgb@DeclarationTitleEN}%   expansion issuses!
    \ifthenelse{\equal{\hgb@TitleLanguage}{german}}%
      {\chapter{\hgb@DeclarationTitleDE}}
      {\chapter{\hgb@DeclarationTitleEN}}
		\noindent%
    \ifthenelse{\equal{\hgb@TitleLanguage}{german}}%
      {\begin{german}\hgb@DeclarationTextDE\end{german}}
      {\begin{english}\hgb@DeclarationTextEN\end{english}}
		\par
		\vspace{10mm}
		\noindent
    \ifthenelse{\equal{\hgb@TitleLanguage}{german}}%
      {\hgb@PlaceOfStudy, am 
        \hgb@SubmissionDay.~%						\DTMfetchday{hgb@DateOfSubmission}.~%
        \hgb@SubmissionMonthNameDE~%		\DTMgermanmonthname{\DTMfetchmonth{hgb@DateOfSubmission}}~%
        \hgb@SubmissionYear%						\DTMfetchyear{hgb@DateOfSubmission}
			}
      {\hgb@PlaceOfStudy, 
        \hgb@SubmissionDay~%						\DTMfetchday{hgb@DateOfSubmission}~%
        \hgb@SubmissionMonthNameEN~%		\DTMenglishmonthname{\DTMfetchmonth{hgb@DateOfSubmission}}~%
        \hgb@SubmissionYear%						\DTMfetchyear{hgb@DateOfSubmission}
			}
		\par
		\vspace{12mm}
		\noindent
		\hgb@Author
    %% ------------------------------------- REMOVE!!
    \vspace{20mm}
    \hrule
    \showDebugText
}

\newcommand{\showDebugText}{
\noindent
\textbf{Debugging:}\\
%
hgb@MainLanguage=\hgb@MainLanguage\\
hgb@TitleLanguage=\hgb@TitleLanguage\\
languagename=\languagename\\
}
