%% hgbtheme-bachelor.sty
%% This file is part of the Hagenberg Thesis package for creating bachelors's and masters's theses
%% Author: Wilhelm Burger (wilbur@ieee.org)
%% GitHub: https://github.com/Digital-Media/HagenbergThesis
%% File encoding: UTF-8

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{hgbtheme-thesis}[2023/10/26]%%AUTO

%% This is a 'theme' file which specifies the layout and structure of the
%% document's front pages.

% required parameters:
  % \@titlepagefont
  % \@programtype
  % \@programname
  % \@placeofstudy
  % @dateofsubmission
  % \hgb@TitleLanguage
  % @hgbisproposal (boolean)

%% -----------------------
  
\renewcommand{\hgb@makefrontpages}{  %% rename without @ to indicate it is documented
  \@maketitlepage%
	\ifthenelse{\boolean{@hgbisproposal}}%
		{%	thesis proposal:
			\@advisorpage%      predefined in hgbthesis.cls
			%no copyright/declaration page for proposals
		}%			
		{%	final thesis:
			\@advisorpage%      predefined in hgbthesis.cls
			\@copyrightpage%    predefined in hgbthesis.cls
			\@declarationpage%  predefined in hgbthesis.cls
		}%
}


%% Title page ---------------------------------------------------

\renewcommand{\@maketitlepage}{%
\begin{titlepage}%
		\rule{0mm}{1mm}%
		\vspace*{0mm}%
		\begin{center}%
			\@titlepagefont%
			\setlength{\unitlength}{1cm}%
			\parbox[c][5cm][c]{12cm}{%
				\centering\LARGE\bfseries%
				\setlength{\baselineskip}{25pt}%
				\thetitle%    \thetitle is defined by titling package (instead of \@title)
			}
			\vskip 15mm%
			{\large\theauthor}% \theauthor is defined by titling package (instead of \@author)
			\vskip 15mm%
			\@makelogo%
			\vskip 15mm%
			% ---------------------------------
      \ifthenelse{\equal{\hgb@TitleLanguage}{german}}
        {\def\tmp@ThesisName{\hgbThesisNameDE} % fully expand by \edef to make \MakeUppercase and \@addspaces work!
         \def\tmp@ProposalName{\hgbProposalNameDE}}
        {\def\tmp@ThesisName{\hgbThesisNameEN}
         \def\tmp@ProposalName{\hgbProposalNameEN}}
      {\Large\@addspaces{\MakeUppercase{\tmp@ThesisName}}%
        \ifthenelse{\boolean{@hgbisproposal}}{\space\space(\@addspaces{\MakeUppercase{\tmp@ProposalName}})}{}}
      % ---------------------------------
			\vskip 4mm%
			%
			{\large\ifthenelse{\equal{\hgb@TitleLanguage}{german}}
          {eingereicht am}%
          {submitted to the}}
      \vskip 1mm 
      {\large \@programtype}%
			\vskip 4mm%
			{\large\@programname}%
			\vskip 4mm%
      % -------------------
			{\large\ifthenelse{\equal{\hgb@TitleLanguage}{german}}
          {\@institution\ in \@placeofstudy}%
          {\@institution\ at \@placeofstudy}%
      }%
      % -------------------
			\vskip 16mm%
      {\large im \DTMgermanmonthname{\DTMfetchmonth{@dateofsubmission}} \DTMfetchyear{@dateofsubmission}}%
		\end{center}%
		\vfil%
\end{titlepage}%
}

%% -----------------------------

\newlength{\@logoheight}
\setlength{\@logoheight}{30mm}

\newcommand{\@makelogo}[0]{%
\ifthenelse{\equal{\@logofile}{}}%	check if \@logofile is empty (unspecified)
	{\vspace*{\@logoheight}}%			skip logo
	{\includegraphics[height=\@logoheight]{\@logofile}}%	insert logo
}

% Default Advisor Page ----------------------------------------

\newcommand{\@advisorheaderfinal}{
	\ifthenelse{\equal{\hgb@TitleLanguage}{german}}%
			{Betreuung}%
			{Advisor}%
}

\newcommand{\@advisorheaderproposal}{
	\ifthenelse{\equal{\hgb@TitleLanguage}{german}}%
			{Betreuung (Vorschlag)}%
			{Proposed Advisor}%
}

\renewcommand{\@advisorpage}{%
	\ifthenelse{\equal{\@advisor}{}}%	does nothing if advisor is undefined 
		{}{%
		\newpage
		%\setcounter{page}{2}
		\thispagestyle{plain}
		\rule{0mm}{1mm}
		\vspace{90mm}
		\begin{center}
			\ifthenelse{\boolean{@hgbisproposal}}%
				{\@advisorheaderproposal:}%
				{\@advisorheaderfinal:}%
			\\
			\vspace{5mm} 
      {\Large\sffamily\@advisor}
		\end{center}
		}
}

%% Default Copyright/License page ----------------------------------------


\newcommand{\@strictLicenseDE}{Alle Rechte vorbehalten}
\newcommand{\@strictLicenseEN}{All Rights Reserved}

\newcommand{\@strictLicense}{%
\ifthenelse{\equal{\hgb@TitleLanguage}{german}}%
	{\begin{german}\@strictLicenseDE\end{german}}
	{\begin{english}\@strictLicenseEN\end{english}}
}

%% ------

\newcommand{\@ccLicenseDE}{%
Diese Arbeit wird unter den Bedingungen der \textsf{Creative Commons Lizenz} 
\emph{Attribution-NonCommercial-NoDerivatives 4.0 International} (CC BY-NC-ND 4.0) 
veröffentlicht -- siehe \url{https://creativecommons.org/licenses/by-nc-nd/4.0/}.
}

\newcommand{\@ccLicenseEN}{%
This work is published under the conditions of the \textsf{Creative Commons License} 
\emph{Attribution-NonCommercial-NoDerivatives 4.0 International} (CC BY-NC-ND 4.0)%
---see \url{https://creativecommons.org/licenses/by-nc-nd/4.0/}.
}

\newcommand{\@ccLicense}{%
\ifthenelse{\equal{\hgb@TitleLanguage}{german}}%
	{\begin{german}\@ccLicenseDE\end{german}}
	{\begin{english}\@ccLicenseEN\end{english}}
}

%% ------

\newcommand{\@TheLicense}{%
\ifthenelse{\equal{\@license}{strict}}%
  {\@strictLicense}%
  {\@ccLicense}%
}

\renewcommand{\@copyrightpage}{%
  \newpage
  \thispagestyle{plain}
  \rule{0mm}{1mm}
  \vspace*{75mm}
  \begin{center}
  \textsf{\copyright\ Copyright\ \DTMfetchyear{@dateofsubmission} \theauthor}
  \end{center}
  \vspace{8mm}
  \JustifyOrCenter{\@TheLicense} % defined in hgb.sty
}

%% Default Declaration Page ----------------------------------------

\newcommand{\hgb@DeclarationTitleDE}{Erklärung}
\newcommand{\hgb@DeclarationTextDE}{%
  Ich erkläre eidesstattlich, dass ich die vorliegende Arbeit selbstständig und ohne fremde Hilfe verfasst, 
  andere als die angegebenen Quellen nicht benutzt und die den benutzten Quellen entnommenen Stellen als 
  solche gekennzeichnet habe. Die Arbeit wurde bisher in gleicher oder ähnlicher Form keiner anderen 
  Prüfungsbehörde vorgelegt.
  Die vorliegende, gedruckte Arbeit ist mit dem elektronisch übermittelten Textdokument identisch.
}

\newcommand{\hgb@DeclarationTitleEN}{Declaration}
\newcommand{\hgb@DeclarationTextEN}{%
  I hereby declare and confirm that this thesis is entirely the result of my own original work. 
  Where other sources of information have been used, they have been indicated as such and properly 
  acknowledged. I further declare that this or similar work has not been submitted for credit elsewhere.
  This printed copy is identical to the submitted electronic version.
}

%% TODO: again this does not work because of expansion issuses in \chapter
%\newcommand{\hgb@DeclarationTitle}{
  %\ifthenelse{\equal{\hgb@MainLanguage}{german}}  %\hgb@TitleLanguage
    %{\hgb@DeclarationTitleDE}%
    %{\hgb@DeclarationTitleEN}
%}
%
%\newcommand{\hgb@DeclarationText}{
  %\ifthenelse{\equal{\hgb@MainLanguage}{german}}
    %{\hgb@DeclarationTextDE}
    %{\hgb@DeclarationTextEN}
%}

\renewcommand{\@declarationpage}{
		%\chapter{\hgb@DeclarationTitleEN}%   expansion issuses!
    \ifthenelse{\equal{\hgb@TitleLanguage}{german}}%
      {\chapter{\hgb@DeclarationTitleDE}}
      {\chapter{\hgb@DeclarationTitleEN}}
		\noindent%
    \ifthenelse{\equal{\hgb@TitleLanguage}{german}}%
      {\begin{german}\hgb@DeclarationTextDE\end{german}}
      {\begin{english}\hgb@DeclarationTextEN\end{english}}
		\par
		\vspace{10mm}
		\noindent
    \ifthenelse{\equal{\hgb@TitleLanguage}{german}}%
      {\@placeofstudy, am 
        \DTMfetchday{@dateofsubmission}.~%
        \DTMgermanmonthname{\DTMfetchmonth{@dateofsubmission}}~%
        \DTMfetchyear{@dateofsubmission}}
      {\@placeofstudy, 
        \DTMfetchday{@dateofsubmission}~%
        \DTMenglishmonthname{\DTMfetchmonth{@dateofsubmission}}~%
        \DTMfetchyear{@dateofsubmission}}
		\par
		\vspace{12mm}
		\noindent
		\theauthor
}

